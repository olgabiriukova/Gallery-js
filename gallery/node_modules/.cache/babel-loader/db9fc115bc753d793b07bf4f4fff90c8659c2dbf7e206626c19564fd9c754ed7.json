{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lelia\\\\gallery\\\\src\\\\pages\\\\ImageView.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport ImageDetail from '../components/ImageDetail';\nimport ImageService from '../services/ImageService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ImageView() {\n  _s();\n  const {\n    id\n  } = useParams(); // get id from URL params\n  const navigate = useNavigate(); // navigation\n  const [image, setImage] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const imageService = new ImageService();\n  useEffect(() => {\n    const loadImage = async () => {\n      setLoading(true);\n      setError(null);\n      try {\n        const img = await imageService.getImageById(id);\n        setImage(img);\n      } catch (e) {\n        setError(e.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n    loadImage();\n  }, [id]);\n  const handleUpdate = async fields => {\n    try {\n      const updated = await imageService.updateImage(id, fields);\n      setImage(updated);\n    } catch (e) {\n      console.error('Failed to update image:', e);\n    }\n  };\n  const handleDeleteTextComment = async idx => {\n    try {\n      const updated = await imageService.deleteTextComment(id, idx);\n      setImage(updated);\n    } catch (e) {\n      console.error('Failed to delete text comment:', e);\n    }\n  };\n  const handleDeleteAudioComment = async idx => {\n    try {\n      const updated = await imageService.deleteAudioComment(id, idx);\n      setImage(updated);\n    } catch (e) {\n      console.error('Failed to delete audio comment:', e);\n    }\n  };\n  const handleDeleteDrawing = async () => {\n    try {\n      const updated = await imageService.deleteDrawing(id);\n      setImage(updated);\n    } catch (e) {\n      console.error('Failed to delete drawing:', e);\n    }\n  };\n  const handleDeleteImage = async () => {\n    try {\n      await imageService.deleteImage(id);\n      navigate('/'); // navigate back to home\n    } catch (e) {\n      console.error('Failed to delete image:', e);\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 23\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [\"Error: \", error]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(ImageDetail, {\n    image: image,\n    onDrawingSave: drawing => handleUpdate({\n      drawing\n    }),\n    onAudioCommentSave: audioUrl => handleUpdate({\n      audioComments: [...(image.audioComments || []), audioUrl]\n    }),\n    onTextCommentSave: text => handleUpdate({\n      textComments: [...(image.textComments || []), text]\n    }),\n    onDeleteTextComment: handleDeleteTextComment,\n    onDeleteAudioComment: handleDeleteAudioComment,\n    onDeleteDrawing: handleDeleteDrawing,\n    onDeleteImage: handleDeleteImage\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 6\n  }, this);\n}\n_s(ImageView, \"ezeHqLx9T478SGk7H3wlYekyhnQ=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = ImageView;\nexport default ImageView;\nvar _c;\n$RefreshReg$(_c, \"ImageView\");","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","ImageDetail","ImageService","jsxDEV","_jsxDEV","ImageView","_s","id","navigate","image","setImage","loading","setLoading","error","setError","imageService","loadImage","img","getImageById","e","message","handleUpdate","fields","updated","updateImage","console","handleDeleteTextComment","idx","deleteTextComment","handleDeleteAudioComment","deleteAudioComment","handleDeleteDrawing","deleteDrawing","handleDeleteImage","deleteImage","children","fileName","_jsxFileName","lineNumber","columnNumber","onDrawingSave","drawing","onAudioCommentSave","audioUrl","audioComments","onTextCommentSave","text","textComments","onDeleteTextComment","onDeleteAudioComment","onDeleteDrawing","onDeleteImage","_c","$RefreshReg$"],"sources":["C:/Users/lelia/gallery/src/pages/ImageView.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport ImageDetail from '../components/ImageDetail';\r\nimport ImageService from '../services/ImageService';\r\n\r\nfunction ImageView() {\r\n  const { id } = useParams();         // get id from URL params\r\n  const navigate = useNavigate();     // navigation\r\n  const [image, setImage] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  const imageService = new ImageService();\r\n\r\n  useEffect(() => {\r\n    const loadImage = async () => {\r\n      setLoading(true);\r\n      setError(null);\r\n      try {\r\n        const img = await imageService.getImageById(id);\r\n        setImage(img);\r\n      } catch (e) {\r\n        setError(e.message);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    loadImage();\r\n  }, [id]);\r\n\r\n  const handleUpdate = async (fields) => {\r\n    try {\r\n      const updated = await imageService.updateImage(id, fields);\r\n      setImage(updated);\r\n    } catch (e) {\r\n      console.error('Failed to update image:', e);\r\n    }\r\n  };\r\n\r\n  const handleDeleteTextComment = async (idx) => {\r\n    try {\r\n      const updated = await imageService.deleteTextComment(id, idx);\r\n      setImage(updated);\r\n    } catch (e) {\r\n      console.error('Failed to delete text comment:', e);\r\n    }\r\n  };\r\n\r\n  const handleDeleteAudioComment = async (idx) => {\r\n    try {\r\n      const updated = await imageService.deleteAudioComment(id, idx);\r\n      setImage(updated);\r\n    } catch (e) {\r\n      console.error('Failed to delete audio comment:', e);\r\n    }\r\n  };\r\n\r\n  const handleDeleteDrawing = async () => {\r\n    try {\r\n      const updated = await imageService.deleteDrawing(id);\r\n      setImage(updated);\r\n    } catch (e) {\r\n      console.error('Failed to delete drawing:', e);\r\n    }\r\n  };\r\n\r\n  const handleDeleteImage = async () => {\r\n    try {\r\n      await imageService.deleteImage(id);\r\n      navigate('/');  // navigate back to home\r\n    } catch (e) {\r\n      console.error('Failed to delete image:', e);\r\n    }\r\n  };\r\n\r\n  if (loading) return <div>Loading...</div>;\r\n  if (error) return <div>Error: {error}</div>;\r\n\r\n  return (\r\n     <ImageDetail\r\n      image={image}\r\n      onDrawingSave={(drawing) => handleUpdate({ drawing })}\r\n      onAudioCommentSave={(audioUrl) =>\r\n        handleUpdate({ audioComments: [...(image.audioComments || []), audioUrl] })\r\n      }\r\n      onTextCommentSave={(text) =>\r\n        handleUpdate({ textComments: [...(image.textComments || []), text] })\r\n      }\r\n      onDeleteTextComment={handleDeleteTextComment}\r\n      onDeleteAudioComment={handleDeleteAudioComment}\r\n      onDeleteDrawing={handleDeleteDrawing}\r\n      onDeleteImage={handleDeleteImage}\r\n    />\r\n  );\r\n}\r\n\r\nexport default ImageView;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}