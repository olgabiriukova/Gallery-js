{"ast":null,"code":"class ImageService {\n  constructor() {}\n\n  // Fetch image data by ID\n  async getImageById(id) {\n    const response = await fetch(`/api/images/${id}`, {\n      headers: {\n        'Accept': 'application/json'\n      }\n    });\n    const text = await response.text();\n    if (!response.ok) {\n      console.error('Server returned error:', text);\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    try {\n      return JSON.parse(text);\n    } catch (e) {\n      console.error('Invalid JSON:', text);\n      throw new Error('Invalid JSON from server');\n    }\n  }\n\n  // Update image with given fields\n  async updateImage(id, fields) {\n    const response = await fetch(`/api/images/${id}`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(fields)\n    });\n    if (!response.ok) throw new Error('Failed to update image');\n    return await response.json();\n  }\n\n  // Delete text comment by index\n  async deleteTextComment(id, idx) {\n    const image = await this.getImageById(id);\n    if (image.textComments && image.textComments.length > idx) {\n      image.textComments.splice(idx, 1);\n      return await this.updateImage(id, {\n        textComments: image.textComments\n      });\n    }\n    return image;\n  }\n\n  // Delete audio comment by index\n  async deleteAudioComment(id, idx) {\n    const image = await this.getImageById(id);\n    if (image.audioComments && image.audioComments.length > idx) {\n      image.audioComments.splice(idx, 1);\n      return await this.updateImage(id, {\n        audioComments: image.audioComments\n      });\n    }\n    return image;\n  }\n\n  // Delete drawing\n  async deleteDrawing(id) {\n    return await this.updateImage(id, {\n      drawing: null\n    });\n  }\n\n  // Delete entire image\n  async deleteImage(id) {\n    const response = await fetch(`/api/images/${id}`, {\n      method: 'DELETE'\n    });\n    if (!response.ok) throw new Error('Failed to delete image');\n  }\n}\nexport default ImageService;","map":{"version":3,"names":["ImageService","constructor","getImageById","id","response","fetch","headers","text","ok","console","error","Error","status","JSON","parse","e","updateImage","fields","method","body","stringify","json","deleteTextComment","idx","image","textComments","length","splice","deleteAudioComment","audioComments","deleteDrawing","drawing","deleteImage"],"sources":["C:/Users/lelia/gallery/src/services/ImageService.js"],"sourcesContent":["class ImageService {\r\n  constructor() {}\r\n\r\n  // Fetch image data by ID\r\n  async getImageById(id) {\r\n    const response = await fetch(`/api/images/${id}`, {\r\n      headers: { 'Accept': 'application/json' },\r\n    });\r\n\r\n    const text = await response.text();\r\n\r\n    if (!response.ok) {\r\n      console.error('Server returned error:', text);\r\n      throw new Error(`HTTP error! status: ${response.status}`);\r\n    }\r\n\r\n    try {\r\n      return JSON.parse(text);\r\n    } catch (e) {\r\n      console.error('Invalid JSON:', text);\r\n      throw new Error('Invalid JSON from server');\r\n    }\r\n  }\r\n\r\n  // Update image with given fields\r\n  async updateImage(id, fields) {\r\n    const response = await fetch(`/api/images/${id}`, {\r\n      method: 'PUT',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify(fields),\r\n    });\r\n    if (!response.ok) throw new Error('Failed to update image');\r\n    return await response.json();\r\n  }\r\n\r\n  // Delete text comment by index\r\n  async deleteTextComment(id, idx) {\r\n    const image = await this.getImageById(id);\r\n    if (image.textComments && image.textComments.length > idx) {\r\n      image.textComments.splice(idx, 1);\r\n      return await this.updateImage(id, { textComments: image.textComments });\r\n    }\r\n    return image;\r\n  }\r\n\r\n  // Delete audio comment by index\r\n  async deleteAudioComment(id, idx) {\r\n    const image = await this.getImageById(id);\r\n    if (image.audioComments && image.audioComments.length > idx) {\r\n      image.audioComments.splice(idx, 1);\r\n      return await this.updateImage(id, { audioComments: image.audioComments });\r\n    }\r\n    return image;\r\n  }\r\n\r\n  // Delete drawing\r\n  async deleteDrawing(id) {\r\n    return await this.updateImage(id, { drawing: null });\r\n  }\r\n\r\n  // Delete entire image\r\n  async deleteImage(id) {\r\n    const response = await fetch(`/api/images/${id}`, {\r\n      method: 'DELETE',\r\n    });\r\n    if (!response.ok) throw new Error('Failed to delete image');\r\n  }\r\n}\r\n\r\nexport default ImageService;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}